<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Mees Molenaar">
<meta name="dcterms.date" content="2023-01-08">

<title>CabbageMees - Een Flutter App - Deel 5 - De simpelste implementatie van de App</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/logo.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-9GMDP6RW3B"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-9GMDP6RW3B', { 'anonymize_ip': true});
</script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="CabbageMees - Een Flutter App - Deel 5 - De simpelste implementatie van de App">
<meta property="og:description" content="Eindelijk starten met het maken van de app!">
<meta property="og:image" content="https://cabbagemees.nl/posts/2023-01-08-Flutter-app-deel-5-start-app/images/DALL·E 2023-01-11 20.18.00 - A line of floppy disks.png">
<meta property="og:site-name" content="CabbageMees">
<meta property="og:image:height" content="1024">
<meta property="og:image:width" content="1024">
<meta name="twitter:title" content="CabbageMees - Een Flutter App - Deel 5 - De simpelste implementatie van de App">
<meta name="twitter:description" content="Eindelijk starten met het maken van de app!">
<meta name="twitter:image" content="https://cabbagemees.nl/posts/2023-01-08-Flutter-app-deel-5-start-app/images/DALL·E 2023-01-11 20.18.00 - A line of floppy disks.png">
<meta name="twitter:image-height" content="1024">
<meta name="twitter:image-width" content="1024">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">CabbageMees</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">Over Mij</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Mees-Molenaar" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/CabbageMees" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Een Flutter App - Deel 5 - De simpelste implementatie van de App</h1>
            <p class="subtitle lead">Eindelijk starten met het maken van de app!</p>
                                <div class="quarto-categories">
                <div class="quarto-category">Flutter</div>
                <div class="quarto-category">Android</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Mees Molenaar </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 8, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#intro" id="toc-intro" class="nav-link active" data-scroll-target="#intro">Intro</a></li>
  <li><a href="#widget-tests" id="toc-widget-tests" class="nav-link" data-scroll-target="#widget-tests">Widget Tests</a></li>
  <li><a href="#de-app" id="toc-de-app" class="nav-link" data-scroll-target="#de-app">De App</a>
  <ul class="collapse">
  <li><a href="#main.dart" id="toc-main.dart" class="nav-link" data-scroll-target="#main.dart">main.dart</a></li>
  <li><a href="#app.dart" id="toc-app.dart" class="nav-link" data-scroll-target="#app.dart">app.dart</a></li>
  <li><a href="#home.dart" id="toc-home.dart" class="nav-link" data-scroll-target="#home.dart">home.dart</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="intro" class="level2">
<h2 class="anchored" data-anchor-id="intro">Intro</h2>
<p>Hallo, In de vorige post<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> hebben is de integration test geschreven. Nu faalt deze test omdat de app nog niet gemaakt is, maar daar gaat in deze post verandering in komen! Maar, omdat ik (zoveel mogelijk) test driven probeer te werken begint deze post opnieuw met tests… Alleen dit keer zijn het Widget tests. Deze tests lijken in eerste instantie veel op de integration test. Het verschil is dat deze tests losse onderdelen, Widgets, testen in plaats van het geheel (wat we doen met de integration test).</p>
<p>Laten we beginnen!</p>
<p>PS: <a href="https://github.com/Mees-Molenaar/blog-daily-practices-app/releases/tag/deel-5.2">Vind de code hier</a></p>
</section>
<section id="widget-tests" class="level2">
<h2 class="anchored" data-anchor-id="widget-tests">Widget Tests</h2>
<p>Een widget test<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> is een test wat een onderdeel van de User Interface (UI) test. Hetgeen dat er getest gaat worden is wederom gebaseerd op de ruwe schets (hieronder weergeven). En met de widget test, wordt in dat geval ook dezelfde logica getest (mede doordat de app nog niet zo complex is).</p>
<p><img src="images/flutter_deel_4_ruwe_schets.PNG" class="img-fluid"></p>
<p>In onderstaande Widget test zijn de tests in verschillende groepen verdeelt, omdat dit losse Widgets zijn.</p>
<p>De eerste groep is de DailyPracticeApp groep, en die test de Widget <code>DailyPracticeApp</code>. Wanneer je deze weergeeft verwacht ik dat de <code>PracticesPage</code> wordt weergeven. De test werkt als volgt:</p>
<ul>
<li>Je rendert (weergeven van) de Widget met <code>tester.pumtWidget()</code></li>
<li>Je zoekt de <code>PracticesPage</code> wordt weergeven met <code>find.byType()</code></li>
<li>Je test de verwachting (<code>expect</code>) dat er 1 Widget met het type <code>PracticesPage</code> is gerendert (<code>findsOneWidget</code>).</li>
</ul>
<p>In bovenstaande test zit een structuur.</p>
<ul>
<li>De test wordt voorbereid (in dit geval door je Widget te renderen)</li>
<li>Je zoekt iets (de <code>PracticesPage</code>)</li>
<li>Je test je verwachting</li>
</ul>
<p>Deze structuur wordt Arrange, Act en Assert genoemd. Al moet ik zeggen dat Arrange en Act in dit geval zijn samengevoegd tot het renderen van de Widget. Een test die deze structuur beter aanhoud zou de volgende kunnen zijn:</p>
<ul>
<li>Je rendert een Widget met een knop (Arrange)</li>
<li>Je voert een actie uit, deze actie is op de knop drukken (Act)</li>
<li>Je verwacht dat onButtonClick (bijvoorbeeld) 1x wordt uitegevoerd (Assert)</li>
</ul>
<p>Je zult deze structuur in veel tests terug vinden omdat het structurenen van tests de tests leesbaarder maken!</p>
<p>De volgende test groep <code>PracticesPage</code>, test ongeveer hetzelfde, maar dan wordt er getest of er een andere Widget gerenderd wordt (<code>PracticesView</code>). Hierna volger er interessantere tests, namelijk de <code>PracticesView</code> groep.</p>
<p>In deze groep wordt er namelijk getest of de app titel en alle practices worden gerenderd. Als eerste de app titel, die vindt je door in de AppBar te kijken (een Widget dat bovenaan je mobiele scherm verschijnt). En daarin te zoeken naar de titel ‘Daily Practices’.</p>
<p>Tot slot, wordt er getest of alle practices in de lijst kunnen gevonden. Maar dit heeft ook wat belemmeringen. Normaliter kan je namelijk alleen testen wat er op dat moment op je scherm verschijnt. Daarom gebruiken we net als in de integration tests de scroll functionaliteit. Dat resulteert in de volgende stappen: * Zoek een <code>Scrollable</code> (dat is de lijst) * Controleer of de eerste practice is gerenderd * Scroll door <code>tester.fling()</code> te gebruiken (let op: je moet je scherm dan verversen door <code>tester.pumpAndSettle()</code> aan te roepen) * Test of de laatste practice is gerenderd</p>
<p>Vervolgens wordt dezelfde tactiek gebruikt om te testen of er 1 actieve practice is. Maar hiervoor wordt er aan de actieve practice een speciale Key meegeven waarop gezocht kan worden. Dat wordt gebruikt om net zo lang te scrollen totdat de actieve practice in beeld is.</p>
<p>Dit waren de Widget testen! Op dit moment zullen ze falen en dat kan je zien door</p>
<blockquote class="blockquote">
<p>flutter test</p>
</blockquote>
<p>uit te voeren! Omdat er verder geen functionaliteit in de basis app hoeft te zitten kan er eindelijk aan de app gewerkt worden!</p>
<p>PS: Ik heb van een collega geleerd om je groepen en tests op de volgende manier te benoemen:</p>
<ul>
<li>De buitenste groep is de class of functie naam die je wilt testen
<ul>
<li>Dan schrijf je in de test wat die moet doen, dan kan je namelijk de groep en de test lezen als 1 zin.
<ul>
<li>Bijvoorbeeld: DailyPracticeApp, renders PracticesPage</li>
</ul></li>
<li>Maar wanneer je als in de zin gaat gebruiken, dan maak je een nieuwe groep!
<ul>
<li>Bijvoorbeeld, DailyPracticesApp, (als) je op de knop drukt (dan) render je een succes bericht (de ‘als’ en ‘dan’ schrijf je niet expliciet op)
<ul>
<li>Groep: DailyPracticesApp</li>
<li>Groep: je op de knop drukt</li>
<li>Test: render je een succes bericht</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource default number-lines code-with-copy"><code class="sourceCode default"><span id="cb1-1"><a href="#cb1-1"></a>import 'package:daily_practices_app/features/home/home.dart';</span>
<span id="cb1-2"><a href="#cb1-2"></a>import 'package:flutter/material.dart';</span>
<span id="cb1-3"><a href="#cb1-3"></a>import 'package:flutter_test/flutter_test.dart';</span>
<span id="cb1-4"><a href="#cb1-4"></a>import 'package:daily_practices_app/app/app.dart';</span>
<span id="cb1-5"><a href="#cb1-5"></a></span>
<span id="cb1-6"><a href="#cb1-6"></a>void main() {</span>
<span id="cb1-7"><a href="#cb1-7"></a>  group('DailyPracticeApp', () {</span>
<span id="cb1-8"><a href="#cb1-8"></a>    testWidgets('renders PracticesPage', (tester) async {</span>
<span id="cb1-9"><a href="#cb1-9"></a>      await tester.pumpWidget(</span>
<span id="cb1-10"><a href="#cb1-10"></a>        const DailyPracticeApp(),</span>
<span id="cb1-11"><a href="#cb1-11"></a>      );</span>
<span id="cb1-12"><a href="#cb1-12"></a></span>
<span id="cb1-13"><a href="#cb1-13"></a>      expect(find.byType(PracticesPage), findsOneWidget);</span>
<span id="cb1-14"><a href="#cb1-14"></a>    });</span>
<span id="cb1-15"><a href="#cb1-15"></a></span>
<span id="cb1-16"><a href="#cb1-16"></a>    group('PracticesPage', () {</span>
<span id="cb1-17"><a href="#cb1-17"></a>      testWidgets('renders PracticesView', (tester) async {</span>
<span id="cb1-18"><a href="#cb1-18"></a>        await tester.pumpWidget(</span>
<span id="cb1-19"><a href="#cb1-19"></a>          const DailyPracticeApp(),</span>
<span id="cb1-20"><a href="#cb1-20"></a>        );</span>
<span id="cb1-21"><a href="#cb1-21"></a></span>
<span id="cb1-22"><a href="#cb1-22"></a>        expect(find.byType(PracticesView), findsOneWidget);</span>
<span id="cb1-23"><a href="#cb1-23"></a>      });</span>
<span id="cb1-24"><a href="#cb1-24"></a>    });</span>
<span id="cb1-25"><a href="#cb1-25"></a></span>
<span id="cb1-26"><a href="#cb1-26"></a>    group('PracticesView', () {</span>
<span id="cb1-27"><a href="#cb1-27"></a>      Widget buildSubject() {</span>
<span id="cb1-28"><a href="#cb1-28"></a>        return const MaterialApp(home: PracticesView());</span>
<span id="cb1-29"><a href="#cb1-29"></a>      }</span>
<span id="cb1-30"><a href="#cb1-30"></a></span>
<span id="cb1-31"><a href="#cb1-31"></a>      testWidgets('renders AppBar with title text', (tester) async {</span>
<span id="cb1-32"><a href="#cb1-32"></a>        await tester.pumpWidget(buildSubject());</span>
<span id="cb1-33"><a href="#cb1-33"></a></span>
<span id="cb1-34"><a href="#cb1-34"></a>        expect(find.byType(AppBar), findsOneWidget);</span>
<span id="cb1-35"><a href="#cb1-35"></a>        expect(</span>
<span id="cb1-36"><a href="#cb1-36"></a>          find.descendant(</span>
<span id="cb1-37"><a href="#cb1-37"></a>            of: find.byType(AppBar),</span>
<span id="cb1-38"><a href="#cb1-38"></a>            matching: find.text('Daily Practices'),</span>
<span id="cb1-39"><a href="#cb1-39"></a>          ),</span>
<span id="cb1-40"><a href="#cb1-40"></a>          findsOneWidget,</span>
<span id="cb1-41"><a href="#cb1-41"></a>        );</span>
<span id="cb1-42"><a href="#cb1-42"></a>      });</span>
<span id="cb1-43"><a href="#cb1-43"></a></span>
<span id="cb1-44"><a href="#cb1-44"></a>      testWidgets('renders all listitems', (tester) async {</span>
<span id="cb1-45"><a href="#cb1-45"></a>        await tester.pumpWidget(buildSubject());</span>
<span id="cb1-46"><a href="#cb1-46"></a></span>
<span id="cb1-47"><a href="#cb1-47"></a>        final listFinder = find.byType(Scrollable);</span>
<span id="cb1-48"><a href="#cb1-48"></a>        expect(listFinder, findsOneWidget);</span>
<span id="cb1-49"><a href="#cb1-49"></a></span>
<span id="cb1-50"><a href="#cb1-50"></a>        // Verify that the first practice can be found</span>
<span id="cb1-51"><a href="#cb1-51"></a>        expect(find.text('Sleep eight hours'), findsOneWidget);</span>
<span id="cb1-52"><a href="#cb1-52"></a></span>
<span id="cb1-53"><a href="#cb1-53"></a>        // Scroll to the bottom</span>
<span id="cb1-54"><a href="#cb1-54"></a>        await tester.fling(</span>
<span id="cb1-55"><a href="#cb1-55"></a>          listFinder,</span>
<span id="cb1-56"><a href="#cb1-56"></a>          const Offset(0, -500),</span>
<span id="cb1-57"><a href="#cb1-57"></a>          10000,</span>
<span id="cb1-58"><a href="#cb1-58"></a>        );</span>
<span id="cb1-59"><a href="#cb1-59"></a>        await tester.pumpAndSettle();</span>
<span id="cb1-60"><a href="#cb1-60"></a></span>
<span id="cb1-61"><a href="#cb1-61"></a>        // Verify that the last practice can be found</span>
<span id="cb1-62"><a href="#cb1-62"></a>        expect(find.text('Deep breathing'), findsOneWidget);</span>
<span id="cb1-63"><a href="#cb1-63"></a>      });</span>
<span id="cb1-64"><a href="#cb1-64"></a></span>
<span id="cb1-65"><a href="#cb1-65"></a>      testWidgets('one practice should be active', (tester) async {</span>
<span id="cb1-66"><a href="#cb1-66"></a>        await tester.pumpWidget(buildSubject());</span>
<span id="cb1-67"><a href="#cb1-67"></a></span>
<span id="cb1-68"><a href="#cb1-68"></a>        final listFinder = find.byType(Scrollable);</span>
<span id="cb1-69"><a href="#cb1-69"></a>        expect(listFinder, findsOneWidget);</span>
<span id="cb1-70"><a href="#cb1-70"></a></span>
<span id="cb1-71"><a href="#cb1-71"></a>        final activeItemFinder = find.byKey(const ValueKey('ActivePractice'));</span>
<span id="cb1-72"><a href="#cb1-72"></a></span>
<span id="cb1-73"><a href="#cb1-73"></a>        // Find the active practice</span>
<span id="cb1-74"><a href="#cb1-74"></a>        await tester.scrollUntilVisible(</span>
<span id="cb1-75"><a href="#cb1-75"></a>          activeItemFinder,</span>
<span id="cb1-76"><a href="#cb1-76"></a>          500.0,</span>
<span id="cb1-77"><a href="#cb1-77"></a>          scrollable: listFinder,</span>
<span id="cb1-78"><a href="#cb1-78"></a>        );</span>
<span id="cb1-79"><a href="#cb1-79"></a></span>
<span id="cb1-80"><a href="#cb1-80"></a>        expect(activeItemFinder, findsOneWidget);</span>
<span id="cb1-81"><a href="#cb1-81"></a>      });</span>
<span id="cb1-82"><a href="#cb1-82"></a>    });</span>
<span id="cb1-83"><a href="#cb1-83"></a>  });</span>
<span id="cb1-84"><a href="#cb1-84"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="de-app" class="level2">
<h2 class="anchored" data-anchor-id="de-app">De App</h2>
<section id="main.dart" class="level3">
<h3 class="anchored" data-anchor-id="main.dart">main.dart</h3>
<p>Dan is nu toch echt het moment, het bouwen van de app. Omdat testen nu geschreven zijn, is het (hopelijk) vrij gemakkelijk om de “echte” code te schrijvenn. Volgens de testen begin je namelijk met het maken van de <code>DailyPracticesApp</code>. Dit doe je door in <code>main.dart</code> de <code>DailyPracticesApp</code> te runnen met <code>runApp()</code>.</p>
<p>Even terug, <code>main.dart</code> en <code>runApp()</code> zijn nieuwe termen. Waarvoor dienen ze eigenlijk?</p>
<p>Wanneer je app start moet het ergens beginnen, dat is je <code>main.dart</code> en daarin de <code>main()</code> functie. Dus wanneer je de app opent, is de <code>main()</code> functie het eerste wat uitgevoerd wordt! Ok, en <code>runApp()</code>? Daarvoor is het belangrijk om te weten hoe Flutter op de achtergrond een app opbouwt. De term Widget is al een aantal keer voorbij gekomen en in Flutter zijn Widgets erg belangrijk. Zo belangrijk dat Flutter alleen maar Widgets kent! En uit deze Widgets onstaat een Widget Tree (zelfs 3 afzonderlijke trees^LINK NAAR VIDEO). Het probleem is dat een boom ergens moet beginnen. Daarvoor zorgt <code>runApp()</code>. Deze functie maakt de app die je uitvoert (in dit geval <code>DailyPracticeApp()</code> wat een Widget is) de root van de Widget Tree. Daarna kan je app zoveel Widgets toevoegen aan de Tree als je maar wilt!</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource default number-lines code-with-copy"><code class="sourceCode default"><span id="cb2-1"><a href="#cb2-1"></a>import 'package:daily_practices_app/app/app.dart';</span>
<span id="cb2-2"><a href="#cb2-2"></a>import 'package:flutter/material.dart';</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a>void main() {</span>
<span id="cb2-5"><a href="#cb2-5"></a>  runApp(const DailyPracticeApp());</span>
<span id="cb2-6"><a href="#cb2-6"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="app.dart" class="level3">
<h3 class="anchored" data-anchor-id="app.dart">app.dart</h3>
<p>Wanneer de <code>DailyPracticesApp</code> aan de Root is toegevoegd kan je de <code>MaterialApp</code><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> maken. Dit is een handige Widget die veel voor je doet (zie de documentatie voor verdere info). In dit geval zijn er themas mee gegeven voor de kleuren en een home page! Dat is de <code>PracticesPage</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource default number-lines code-with-copy"><code class="sourceCode default"><span id="cb3-1"><a href="#cb3-1"></a>import 'package:daily_practices_app/features/home/home.dart';</span>
<span id="cb3-2"><a href="#cb3-2"></a>import 'package:flutter/material.dart';</span>
<span id="cb3-3"><a href="#cb3-3"></a>import 'package:daily_practices_app/theme/theme.dart';</span>
<span id="cb3-4"><a href="#cb3-4"></a></span>
<span id="cb3-5"><a href="#cb3-5"></a>class DailyPracticeApp extends StatelessWidget {</span>
<span id="cb3-6"><a href="#cb3-6"></a>  const DailyPracticeApp({super.key});</span>
<span id="cb3-7"><a href="#cb3-7"></a></span>
<span id="cb3-8"><a href="#cb3-8"></a>  @override</span>
<span id="cb3-9"><a href="#cb3-9"></a>  Widget build(BuildContext context) {</span>
<span id="cb3-10"><a href="#cb3-10"></a>    return MaterialApp(</span>
<span id="cb3-11"><a href="#cb3-11"></a>      theme: FlutterPracticesTheme.light,</span>
<span id="cb3-12"><a href="#cb3-12"></a>      darkTheme: FlutterPracticesTheme.dark,</span>
<span id="cb3-13"><a href="#cb3-13"></a>      home: const PracticesPage(),</span>
<span id="cb3-14"><a href="#cb3-14"></a>    );</span>
<span id="cb3-15"><a href="#cb3-15"></a>  }</span>
<span id="cb3-16"><a href="#cb3-16"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="home.dart" class="level3">
<h3 class="anchored" data-anchor-id="home.dart">home.dart</h3>
<p>In de <code>PracticesPage</code> wordt de <code>PracticesView</code> gerenderd (het is de bedoeling dat er nog andere code bijkomt). In de <code>PracticesView</code> wordt er een <code>Scaffold</code> Widget<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> aangemaakt waardoor we een titel kunnen toevoegen (<code>AppBar</code><a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>) en een <code>ListView</code><a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> waarin alle practices aan een lijst toegevoegd kunnen worden. De practices zijn <code>Card</code>s<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> en 1 van de practices is nu actief (dat wordt voor nu bepaald door een willekeurig getal; code regel 119).</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource default number-lines code-with-copy"><code class="sourceCode default"><span id="cb4-1"><a href="#cb4-1"></a>import 'dart:math';</span>
<span id="cb4-2"><a href="#cb4-2"></a></span>
<span id="cb4-3"><a href="#cb4-3"></a>import 'package:flutter/material.dart';</span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a>const practices = &lt;Map&lt;String, dynamic&gt;&gt;[</span>
<span id="cb4-6"><a href="#cb4-6"></a>  {</span>
<span id="cb4-7"><a href="#cb4-7"></a>    'id': 1,</span>
<span id="cb4-8"><a href="#cb4-8"></a>    'practice': 'Sleep eight hours',</span>
<span id="cb4-9"><a href="#cb4-9"></a>  },</span>
<span id="cb4-10"><a href="#cb4-10"></a>  {</span>
<span id="cb4-11"><a href="#cb4-11"></a>    'id': 2,</span>
<span id="cb4-12"><a href="#cb4-12"></a>    'practice': 'Eat two meals instead of three',</span>
<span id="cb4-13"><a href="#cb4-13"></a>  },</span>
<span id="cb4-14"><a href="#cb4-14"></a>  {</span>
<span id="cb4-15"><a href="#cb4-15"></a>    'id': 3,</span>
<span id="cb4-16"><a href="#cb4-16"></a>    'practice': 'No TV (or YouTube)',</span>
<span id="cb4-17"><a href="#cb4-17"></a>  },</span>
<span id="cb4-18"><a href="#cb4-18"></a>  {</span>
<span id="cb4-19"><a href="#cb4-19"></a>    'id': 4,</span>
<span id="cb4-20"><a href="#cb4-20"></a>    'practice': 'No junk food',</span>
<span id="cb4-21"><a href="#cb4-21"></a>  },</span>
<span id="cb4-22"><a href="#cb4-22"></a>  {</span>
<span id="cb4-23"><a href="#cb4-23"></a>    'id': 5,</span>
<span id="cb4-24"><a href="#cb4-24"></a>    'practice': 'No complaining for one whole day',</span>
<span id="cb4-25"><a href="#cb4-25"></a>  },</span>
<span id="cb4-26"><a href="#cb4-26"></a>  {</span>
<span id="cb4-27"><a href="#cb4-27"></a>    'id': 6,</span>
<span id="cb4-28"><a href="#cb4-28"></a>    'practice': 'No gossip',</span>
<span id="cb4-29"><a href="#cb4-29"></a>  },</span>
<span id="cb4-30"><a href="#cb4-30"></a>  {</span>
<span id="cb4-31"><a href="#cb4-31"></a>    'id': 7,</span>
<span id="cb4-32"><a href="#cb4-32"></a>    'practice': 'Return an e-mail from five years ago',</span>
<span id="cb4-33"><a href="#cb4-33"></a>  },</span>
<span id="cb4-34"><a href="#cb4-34"></a>  {</span>
<span id="cb4-35"><a href="#cb4-35"></a>    'id': 8,</span>
<span id="cb4-36"><a href="#cb4-36"></a>    'practice': 'Express thanks to a friend',</span>
<span id="cb4-37"><a href="#cb4-37"></a>  },</span>
<span id="cb4-38"><a href="#cb4-38"></a>  {</span>
<span id="cb4-39"><a href="#cb4-39"></a>    'id': 9,</span>
<span id="cb4-40"><a href="#cb4-40"></a>    'practice': 'Watch a funny movie or a stand-up comic',</span>
<span id="cb4-41"><a href="#cb4-41"></a>  },</span>
<span id="cb4-42"><a href="#cb4-42"></a>  {</span>
<span id="cb4-43"><a href="#cb4-43"></a>    'id': 10,</span>
<span id="cb4-44"><a href="#cb4-44"></a>    'practice': 'Write down a list of ideas. The ideas can be about anything',</span>
<span id="cb4-45"><a href="#cb4-45"></a>  },</span>
<span id="cb4-46"><a href="#cb4-46"></a>  {</span>
<span id="cb4-47"><a href="#cb4-47"></a>    'id': 11,</span>
<span id="cb4-48"><a href="#cb4-48"></a>    'practice':</span>
<span id="cb4-49"><a href="#cb4-49"></a>        'Read a spiritual text. Any one that is inspirational to you. The bible, the Tao te Ching, anything you want',</span>
<span id="cb4-50"><a href="#cb4-50"></a>  },</span>
<span id="cb4-51"><a href="#cb4-51"></a>  {</span>
<span id="cb4-52"><a href="#cb4-52"></a>    'id': 12,</span>
<span id="cb4-53"><a href="#cb4-53"></a>    'practice':</span>
<span id="cb4-54"><a href="#cb4-54"></a>        'Say to yourself when you wake up, "I am going to save a life today. Keep an eye out for that life you can save',</span>
<span id="cb4-55"><a href="#cb4-55"></a>  },</span>
<span id="cb4-56"><a href="#cb4-56"></a>  {</span>
<span id="cb4-57"><a href="#cb4-57"></a>    'id': 13,</span>
<span id="cb4-58"><a href="#cb4-58"></a>    'practice': 'Take up a hobby. Do not say you do not have time',</span>
<span id="cb4-59"><a href="#cb4-59"></a>  },</span>
<span id="cb4-60"><a href="#cb4-60"></a>  {</span>
<span id="cb4-61"><a href="#cb4-61"></a>    'id': 14,</span>
<span id="cb4-62"><a href="#cb4-62"></a>    'practice':</span>
<span id="cb4-63"><a href="#cb4-63"></a>        'Write down your entire schedule. The schedule you do everyday. Cross out one item and do not do that anymore',</span>
<span id="cb4-64"><a href="#cb4-64"></a>  },</span>
<span id="cb4-65"><a href="#cb4-65"></a>  {</span>
<span id="cb4-66"><a href="#cb4-66"></a>    'id': 15,</span>
<span id="cb4-67"><a href="#cb4-67"></a>    'practice': 'Suprise someone',</span>
<span id="cb4-68"><a href="#cb4-68"></a>  },</span>
<span id="cb4-69"><a href="#cb4-69"></a>  {</span>
<span id="cb4-70"><a href="#cb4-70"></a>    'id': 16,</span>
<span id="cb4-71"><a href="#cb4-71"></a>    'practice': 'Think of ten people you are grateful for',</span>
<span id="cb4-72"><a href="#cb4-72"></a>  },</span>
<span id="cb4-73"><a href="#cb4-73"></a>  {</span>
<span id="cb4-74"><a href="#cb4-74"></a>    'id': 17,</span>
<span id="cb4-75"><a href="#cb4-75"></a>    'practice':</span>
<span id="cb4-76"><a href="#cb4-76"></a>        'Forgive someone. You do not have to tell them. Just write it down on a piece of paper and burn the paper (or throw it away)',</span>
<span id="cb4-77"><a href="#cb4-77"></a>  },</span>
<span id="cb4-78"><a href="#cb4-78"></a>  {</span>
<span id="cb4-79"><a href="#cb4-79"></a>    'id': 18,</span>
<span id="cb4-80"><a href="#cb4-80"></a>    'practice': 'Take the stairs instead of the elevator',</span>
<span id="cb4-81"><a href="#cb4-81"></a>  },</span>
<span id="cb4-82"><a href="#cb4-82"></a>  {</span>
<span id="cb4-83"><a href="#cb4-83"></a>    'id': 19,</span>
<span id="cb4-84"><a href="#cb4-84"></a>    'practice':</span>
<span id="cb4-85"><a href="#cb4-85"></a>        'When you find yourself thinking of that special someone who is causing you grief, think very quietly, "No". If you think of him and (or?) her again, think loudly, "No!" Again? Whisper, "No!" Again, say it. Louder. Yell it. Louder. And so on',</span>
<span id="cb4-86"><a href="#cb4-86"></a>  },</span>
<span id="cb4-87"><a href="#cb4-87"></a>  {</span>
<span id="cb4-88"><a href="#cb4-88"></a>    'id': 20,</span>
<span id="cb4-89"><a href="#cb4-89"></a>    'practice': 'Tell someone every day that you love them',</span>
<span id="cb4-90"><a href="#cb4-90"></a>  },</span>
<span id="cb4-91"><a href="#cb4-91"></a>  {</span>
<span id="cb4-92"><a href="#cb4-92"></a>    'id': 21,</span>
<span id="cb4-93"><a href="#cb4-93"></a>    'practice': 'Do not have sex with someone you do not love',</span>
<span id="cb4-94"><a href="#cb4-94"></a>  },</span>
<span id="cb4-95"><a href="#cb4-95"></a>  {</span>
<span id="cb4-96"><a href="#cb4-96"></a>    'id': 22,</span>
<span id="cb4-97"><a href="#cb4-97"></a>    'practice': 'Shower. Scrub. Clean the toxins of your body',</span>
<span id="cb4-98"><a href="#cb4-98"></a>  },</span>
<span id="cb4-99"><a href="#cb4-99"></a>  {</span>
<span id="cb4-100"><a href="#cb4-100"></a>    'id': 23,</span>
<span id="cb4-101"><a href="#cb4-101"></a>    'practice':</span>
<span id="cb4-102"><a href="#cb4-102"></a>        'Read a chapter in a biography about someone who is an inspiration to you',</span>
<span id="cb4-103"><a href="#cb4-103"></a>  },</span>
<span id="cb4-104"><a href="#cb4-104"></a>  {</span>
<span id="cb4-105"><a href="#cb4-105"></a>    'id': 24,</span>
<span id="cb4-106"><a href="#cb4-106"></a>    'practice': 'Make plans to spend time with a friend',</span>
<span id="cb4-107"><a href="#cb4-107"></a>  },</span>
<span id="cb4-108"><a href="#cb4-108"></a>  {</span>
<span id="cb4-109"><a href="#cb4-109"></a>    'id': 25,</span>
<span id="cb4-110"><a href="#cb4-110"></a>    'practice':</span>
<span id="cb4-111"><a href="#cb4-111"></a>        'If you think, "Everything would be better of if I were death" then think. "That is really cool. Now I can do anything I want and I can postpone this thought for a while, maybe even a few months." Because what does it matter now? The planet might not even be around in a few months',</span>
<span id="cb4-112"><a href="#cb4-112"></a>  },</span>
<span id="cb4-113"><a href="#cb4-113"></a>  {</span>
<span id="cb4-114"><a href="#cb4-114"></a>    'id': 26,</span>
<span id="cb4-115"><a href="#cb4-115"></a>    'practice': 'Deep breathing',</span>
<span id="cb4-116"><a href="#cb4-116"></a>  },</span>
<span id="cb4-117"><a href="#cb4-117"></a>];</span>
<span id="cb4-118"><a href="#cb4-118"></a></span>
<span id="cb4-119"><a href="#cb4-119"></a>final activePractice = Random().nextInt(26) + 1;</span>
<span id="cb4-120"><a href="#cb4-120"></a></span>
<span id="cb4-121"><a href="#cb4-121"></a>class PracticesPage extends StatelessWidget {</span>
<span id="cb4-122"><a href="#cb4-122"></a>  const PracticesPage({super.key});</span>
<span id="cb4-123"><a href="#cb4-123"></a></span>
<span id="cb4-124"><a href="#cb4-124"></a>  @override</span>
<span id="cb4-125"><a href="#cb4-125"></a>  Widget build(BuildContext context) {</span>
<span id="cb4-126"><a href="#cb4-126"></a>    return const PracticesView();</span>
<span id="cb4-127"><a href="#cb4-127"></a>  }</span>
<span id="cb4-128"><a href="#cb4-128"></a>}</span>
<span id="cb4-129"><a href="#cb4-129"></a></span>
<span id="cb4-130"><a href="#cb4-130"></a>class PracticesView extends StatelessWidget {</span>
<span id="cb4-131"><a href="#cb4-131"></a>  const PracticesView({super.key});</span>
<span id="cb4-132"><a href="#cb4-132"></a></span>
<span id="cb4-133"><a href="#cb4-133"></a>  @override</span>
<span id="cb4-134"><a href="#cb4-134"></a>  Widget build(BuildContext context) {</span>
<span id="cb4-135"><a href="#cb4-135"></a>    return Scaffold(</span>
<span id="cb4-136"><a href="#cb4-136"></a>      appBar: AppBar(</span>
<span id="cb4-137"><a href="#cb4-137"></a>        title: const Text('Daily Practices'),</span>
<span id="cb4-138"><a href="#cb4-138"></a>      ),</span>
<span id="cb4-139"><a href="#cb4-139"></a>      body: ListView.builder(</span>
<span id="cb4-140"><a href="#cb4-140"></a>        padding: const EdgeInsets.all(8),</span>
<span id="cb4-141"><a href="#cb4-141"></a>        itemCount: practices.length,</span>
<span id="cb4-142"><a href="#cb4-142"></a>        itemBuilder: (BuildContext context, int index) {</span>
<span id="cb4-143"><a href="#cb4-143"></a>          if (index == activePractice) {</span>
<span id="cb4-144"><a href="#cb4-144"></a>            return Card(</span>
<span id="cb4-145"><a href="#cb4-145"></a>              key: const Key('ActivePractice'),</span>
<span id="cb4-146"><a href="#cb4-146"></a>              elevation: 3,</span>
<span id="cb4-147"><a href="#cb4-147"></a>              color: Theme.of(context).colorScheme.primary,</span>
<span id="cb4-148"><a href="#cb4-148"></a>              child: ListTile(</span>
<span id="cb4-149"><a href="#cb4-149"></a>                leading: CircleAvatar(</span>
<span id="cb4-150"><a href="#cb4-150"></a>                  backgroundColor: Colors.white,</span>
<span id="cb4-151"><a href="#cb4-151"></a>                  child: Text(</span>
<span id="cb4-152"><a href="#cb4-152"></a>                    practices[index]['id'].toString(),</span>
<span id="cb4-153"><a href="#cb4-153"></a>                  ),</span>
<span id="cb4-154"><a href="#cb4-154"></a>                ),</span>
<span id="cb4-155"><a href="#cb4-155"></a>                title: Text(</span>
<span id="cb4-156"><a href="#cb4-156"></a>                  practices[index]['practice'],</span>
<span id="cb4-157"><a href="#cb4-157"></a>                  style: const TextStyle(</span>
<span id="cb4-158"><a href="#cb4-158"></a>                    color: Colors.white,</span>
<span id="cb4-159"><a href="#cb4-159"></a>                  ),</span>
<span id="cb4-160"><a href="#cb4-160"></a>                ),</span>
<span id="cb4-161"><a href="#cb4-161"></a>              ),</span>
<span id="cb4-162"><a href="#cb4-162"></a>            );</span>
<span id="cb4-163"><a href="#cb4-163"></a>          } else {</span>
<span id="cb4-164"><a href="#cb4-164"></a>            return Card(</span>
<span id="cb4-165"><a href="#cb4-165"></a>              elevation: 3,</span>
<span id="cb4-166"><a href="#cb4-166"></a>              child: ListTile(</span>
<span id="cb4-167"><a href="#cb4-167"></a>                leading: CircleAvatar(</span>
<span id="cb4-168"><a href="#cb4-168"></a>                  backgroundColor: Theme.of(context).colorScheme.primary,</span>
<span id="cb4-169"><a href="#cb4-169"></a>                  child: Text(practices[index]['id'].toString()),</span>
<span id="cb4-170"><a href="#cb4-170"></a>                ),</span>
<span id="cb4-171"><a href="#cb4-171"></a>                title: Text(practices[index]['practice']),</span>
<span id="cb4-172"><a href="#cb4-172"></a>              ),</span>
<span id="cb4-173"><a href="#cb4-173"></a>            );</span>
<span id="cb4-174"><a href="#cb4-174"></a>          }</span>
<span id="cb4-175"><a href="#cb4-175"></a>        },</span>
<span id="cb4-176"><a href="#cb4-176"></a>      ),</span>
<span id="cb4-177"><a href="#cb4-177"></a>    );</span>
<span id="cb4-178"><a href="#cb4-178"></a>  }</span>
<span id="cb4-179"><a href="#cb4-179"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Als je dan nu naar <code>main.dart</code> navigeert en op de play knop drukt zal je app starten. Voor voorbeelden om je app te starten, <a href="https://codelabs.developers.google.com/codelabs/flutter-codelab-first#3">kan je hier kijken duidelijke uitleg vinden</a>.</p>
<p>Dit was de eerste versie van de app! Alleen het is nog niet volgens de MVP, daarvoor moet de app namelijk iedere ochtend een notificatie geven. Hoe je dat kunt doen zal ik gaan omschrijven in de volgende post.</p>
<p>Tot dan!</p>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p><a href="https://cabbagemees.nl/posts/2022-10-16-Flutter-app-deel-4-de-integration-test/" class="uri">https://cabbagemees.nl/posts/2022-10-16-Flutter-app-deel-4-de-integration-test/</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p><a href="https://docs.flutter.dev/cookbook/testing/widget/introduction" class="uri">https://docs.flutter.dev/cookbook/testing/widget/introduction</a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p><a href="https://api.flutter.dev/flutter/material/MaterialApp-class.html" class="uri">https://api.flutter.dev/flutter/material/MaterialApp-class.html</a><a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p><a href="https://api.flutter.dev/flutter/material/Scaffold-class.html" class="uri">https://api.flutter.dev/flutter/material/Scaffold-class.html</a><a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p><a href="https://api.flutter.dev/flutter/material/AppBar-class.html" class="uri">https://api.flutter.dev/flutter/material/AppBar-class.html</a><a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p><a href="https://api.flutter.dev/flutter/widgets/ListView-class.html" class="uri">https://api.flutter.dev/flutter/widgets/ListView-class.html</a><a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p><a href="https://api.flutter.dev/flutter/material/Card-class.html" class="uri">https://api.flutter.dev/flutter/material/Card-class.html</a><a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>